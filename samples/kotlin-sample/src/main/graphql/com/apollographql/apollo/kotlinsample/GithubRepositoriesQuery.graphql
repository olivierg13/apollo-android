fragment RepositorySummary on Repository {
  id
  name
  description
}

fragment RepositoryDetail on Repository {
  issues {
    totalCount
  }
  pullRequests(states: $pullRequestStates) {
    totalCount
  }
  stargazers {
    totalCount
  }
  forkCount
  releases {
    totalCount
  }
}

query GithubRepositories(
  $repositoriesCount: Int!
  $orderBy: RepositoryOrderField!
  $orderDirection: OrderDirection!
) {
  viewer {
    repositories(
      first: $repositoriesCount
      orderBy: { field: $orderBy, direction: $orderDirection }
      ownerAffiliations: [OWNER]
    ) {
      nodes {
        ...RepositorySummary
      }
    }
  }
}

query GithubRepositorySummary(
  $name: String!
) {
  viewer {
    repository(name: $name) {
      # parent {
      ...RepositorySummary
      # }
    }
  }
}

query GithubRepositoryDetail(
  $name: String!
  $pullRequestStates: [PullRequestState!]!
) {
  viewer {
    repository(name: $name) {
      # parent {
      ...RepositorySummary
      ...RepositoryDetail
      # }
    }
  }
}
